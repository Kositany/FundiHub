<!DOCTYPE html>
<html>
<head>
    <title>Appwrite Connection Test</title>
</head>
<body>
    <h1>Appwrite Direct Connection Test</h1>
    <button onclick="testConnection()">Test Connection</button>
    <div id="results"></div>

    <script src="https://cdn.jsdelivr.net/npm/appwrite@15.0.0"></script>
    <script>
        const { Client, Account, Databases } = Appwrite;

        const client = new Client()
            .setEndpoint('https://fra.cloud.appwrite.io/v1')
            .setProject('68aab77c0025a66bc6e6');

        const account = new Account(client);
        const databases = new Databases(client);

        async function testConnection() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>Testing...</p>';

            try {
                // Test 1: Basic connection
                results.innerHTML += '<p>Testing basic connection...</p>';
                
                try {
                    await account.get();
                    results.innerHTML += '<p>✅ Connection successful - User session found</p>';
                } catch (error) {
                    if (error.code === 401) {
                        results.innerHTML += '<p>✅ Connection successful - No user session (normal)</p>';
                    } else {
                        results.innerHTML += `<p>❌ Connection failed: ${error.message}</p>`;
                        return;
                    }
                }

                // Test 2: Database connection
                results.innerHTML += '<p>Testing database connection...</p>';
                
                try {
                    const database = await databases.get('fundihub-db');
                    results.innerHTML += `<p>✅ Database found: ${database.name}</p>`;
                } catch (dbError) {
                    if (dbError.code === 404) {
                        results.innerHTML += '<p>❌ Database not found - create it in Appwrite Console</p>';
                    } else {
                        results.innerHTML += `<p>❌ Database error: ${dbError.message}</p>';
                    }
                }

            } catch (error) {
                results.innerHTML += `<p>❌ Test failed: ${error.message}</p>`;
                console.error('Full error:', error);
            }
        }
    </script>
</body>
</html>
