<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Appwrite Test</title>
</head>
<body>
    <h1>Direct Appwrite Connection Test</h1>
    <button onclick="testConnection()">Test Connection</button>
    <div id="results"></div>

    <script src="https://cdn.jsdelivr.net/npm/appwrite@18.2.0"></script>
    <script>
        function log(message) {
            document.getElementById('results').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        async function testConnection() {
            document.getElementById('results').innerHTML = '';
            
            try {
                log('üîç Testing direct connection to Appwrite...');
                
                const { Client, Account } = Appwrite;
                
                const client = new Client()
                    .setEndpoint('https://fra.cloud.appwrite.io/v1')
                    .setProject('68aab77c0025a66bc6e6');

                const account = new Account(client);

                log('üì° Sending ping to Appwrite servers...');
                
                // Test basic connection
                try {
                    const user = await account.get();
                    log('‚úÖ Connection successful - User found: ' + user.email);
                } catch (error) {
                    if (error.code === 401) {
                        log('‚úÖ Connection successful - No user session (this is normal)');
                        log('‚úÖ Appwrite is reachable and responding correctly');
                    } else {
                        log('‚ùå Connection failed: ' + error.message);
                        log('‚ùå Error code: ' + error.code);
                        log('‚ùå Error type: ' + error.type);
                        
                        if (error.code === 403) {
                            log('üîß This suggests a platform configuration issue');
                            log('üîß Check that localhost is added as a web platform');
                        }
                    }
                }
            } catch (error) {
                log('‚ùå Critical error: ' + error.message);
                console.error('Full error:', error);
            }
        }
    </script>
</body>
</html>
